# FTP

FTP는 File Transfer Protocol의 약자로, TCP/IP 네트워크 상에서 컴퓨터간 파일을 교환하기 위해 만들어진 통신 규약이다. 파생형으로 TLS 프로토콜과 결합한 TFPS, SSH프로토콜과 결합한 SFTP가 있다. FTP, FTPS는 보통 제어용으로는 21번 포트, 데이터 전송용으로는 20번 포트를 사용하고, SFTP는 보통 22번 포트를 사용한다. FTPS와 SFTP는 FTP보다는 다소 전송 속도가 느리다.

FTP는 Server-Client모델을 사용하며 host는 FTP 유저 인터페이스를 이용해서 애플리케이션 레벨에서 메시지를 전달하게 된다. 보통 서버와 클라이언트간에 하나의 포트를 여는데 위에서 언급했듯이 FTP는 제어(사용자 인증 및 명령)와 전송을 분리하기 위해 두 개의 포트를 사용한다.

그래서 제어(21)포트를 통해서 클라이언트에서 지시하는 명령어가 전달되며, 실제 데이터의 전송은 전송(20)포트를 통해서 이루어진다. 클라이언트가 방화벽, NAT등을 사용하는 환경이면 잘 동작하지 않을 수 있으나 수동 모드를 이용해 서버가 지정한 서버 포트로 연결할 수 있다.

FTP에는 PORT라는 명령어가 있는데, 서버의 전송 대상과 포트를 지정할 수 있다. 그리고 FTP는 전송 대상의 적합성을 검사하는 부분이 프로토콜에 누락되어 있다. 따라서 FTP서버와 다른 시스템 사이에 Logical하게 network분리가 되어있지 않다면 FTP서버를 경유하는 것이 가능해진다. 예를 들면 인터넷과 내부망 사이에 포트 스캔을 탐지하는 방화벽이 설치되어 있어도 FTP서버가 포트 스킨을 할 수 있다는 말이 된다.
